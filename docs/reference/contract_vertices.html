<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Contract multiple vertices into 1 new vertex — contract_vertices • snafun</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Contract multiple vertices into 1 new vertex — contract_vertices"><meta property="og:description" content="contract_vertices combines a set of vertices into one pseudo-vertex
and returns the reduced network."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">snafun</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2024.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/SNAnalyst/SNAfun/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Contract multiple vertices into 1 new vertex</h1>
    <small class="dont-index">Source: <a href="https://github.com/SNAnalyst/SNAfun/blob/HEAD/R/contract_vertices.R" class="external-link"><code>R/contract_vertices.R</code></a></small>
    <div class="hidden name"><code>contract_vertices.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>contract_vertices</code> combines a set of vertices into one pseudo-vertex
and returns the reduced network.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">contract_vertices</span><span class="op">(</span></span>
<span>  <span class="va">g</span>,</span>
<span>  <span class="va">vertices</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"min"</span>, <span class="st">"max"</span>, <span class="st">"union"</span>, <span class="st">"add"</span><span class="op">)</span>,</span>
<span>  attr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_name <span class="op">=</span> <span class="st">"set"</span>,</span>
<span>  out_as_igraph <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-g">g<a class="anchor" aria-label="anchor" href="#arg-g"></a></dt>
<dd><p>network as an <code>igraph</code> object or an adjacency matrix.</p></dd>


<dt id="arg-vertices">vertices<a class="anchor" aria-label="anchor" href="#arg-vertices"></a></dt>
<dd><p>Numeric vertor indicating the indeces of the vertices are
to be contracted.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Indication of which grouping criterion should be used.<br><code>method="min"</code> indicates the "minimum" criterion (edge values as distances).<br><code>method="max"</code> indicates the "maximum" criterion (edge values as non-cumulative strengths).<br><code>method="add"</code> indicates the "addition" criterion (edge values as cumulative strengths).<br><code>method="union"</code> indicates the "union" criterion (edge values as probability).<br>
The default is "min". See details for examples.</p></dd>


<dt id="arg-attr">attr<a class="anchor" aria-label="anchor" href="#arg-attr"></a></dt>
<dd><p>Either NULL or a character string giving an edge attribute name to
be used as weights.
If <code>NULL</code>, the unweighted network is used to calculate the values of the
resulting contracted network.
If not <code>NULL</code> then the values of the given edge attribute are included
in the adjacency matrix. If the graph has multiple edges, the edge attribute
of an arbitrarily chosen edge (for the multiple edges) is included.</p></dd>


<dt id="arg-new-name">new_name<a class="anchor" aria-label="anchor" href="#arg-new-name"></a></dt>
<dd><p>character, name of the new pseudovertex. If not specified,
it will be called "set".</p></dd>


<dt id="arg-out-as-igraph">out_as_igraph<a class="anchor" aria-label="anchor" href="#arg-out-as-igraph"></a></dt>
<dd><p>logical. If <code>TRUE</code> the resulting network is
returned as an <code>igraph</code> object. If <code>FALSE</code>, the output is
returned as an adjacency matrix.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An <code>igraph</code> object or an adjacency matrix of the contracted network.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function contracts a set of vertices into a pseudo-vertex and returns
the network with that new vertex included (and the contracted vertices
excluded).</p>
<p>Weighted ties can be used.
This requires to either provide a weighted adjacency matrix OR
an <code>igraph</code> object with an attribute that is used for weights.
Make sure that this attribute is numeric.
By default, if the <code>igraph</code> object contains an edge attribute called
<code>weight</code>, this attribute will be used as a weight by default, unless
a different edge attribute is explicitly specified as <code>attr</code>.</p>
<p>The <code>method</code> specifies how the (possibly weighted) edges between the
selected <code>vertices</code> and the other vertices are combined into edges between
the new pseudovertex and the other vertices. The default is to use the
<code>min</code> procedure.</p>
<p>NOTE: if <code>g</code> is an <code>igraph</code> object without vertex names, the
names will be added automatically (as integeres, numbered from 1).
This is useful, so it is clear who-is-who after the vertex contraction.</p>
<p>Minimum Criterion: the edge value between a group and an outside vertex
is measured as the minimal value among all the (nonzero) edge values between
any vertex in the group and the outside vertex. Suggested if edge values are
interpreted as distances.<br><em>Example: suppose vertex A to C has distance 2 and B to C has distance 1,
then according to the minimum criterion, the distance between C and
the merged set AB is 1. Note that if B and C are not connected,
the algorithm takes the distance between A and C to describe
the distance between AB and C.</em></p>
<p>Maximum Criterion: the edge value between a group and an outside vertex
is measured as the maximal value among all the (nonzero) edge values between
any vertex in the group and the outside vertex. Suggested if edge values are
interpreted as non-cumulative strengths. <br><em>Example: we keep using the above example, but the figure now indicates
the strength of tie. According to the maximum criterion, the strength of tie
between AB and C is 2.</em></p>
<p>Addition Criterion: the edge value between a group and an outside vertex
is measured as the sum of all the edge values between any vertex in the group
and the outside vertex. Suggested if edge values are as cummulative strengths. <br><em>Example: according to the addition criterion, the strength of tie between
AB and C is 3</em></p>
<p>Union Criterion: the edge value between a group and an outside vertex is measured
as the probability that there is at least one path connecting the group with
the outside vertex. Suggested if edge values are as probability. <br><em>Example: suppose A has probability 0.2 to reach C and B has probability
0.5 to reach C, then C can be reached from merged AB with probability
1 - (1 - 0.2) * (1 - 0.5) = 0.6 according to the union criterion.</em></p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Based on the <code>contract</code> function from the <code>keyplayer</code> package.
The implementation in our package is more general.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a 5x5 weighted and directed adjacency matrix, where edge values</span></span></span>
<span class="r-in"><span><span class="co"># represent the strength of tie</span></span></span>
<span class="r-in"><span><span class="va">W</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>    <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>    <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>    <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">3</span>,</span></span>
<span class="r-in"><span>    <span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    nrow <span class="op">=</span> <span class="fl">5</span>, ncol <span class="op">=</span> <span class="fl">5</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If the strength is believed to be non-accumulative for a group of vertices,</span></span></span>
<span class="r-in"><span><span class="co"># it is proper to use the "maximum" criterion to contract vertex 2 and 3</span></span></span>
<span class="r-in"><span><span class="fu">contract_vertices</span><span class="op">(</span><span class="va">W</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"max"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH c5ab2be UN-- 4 12 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: name (v/c)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from c5ab2be (vertex names):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1--set 1--set 1--set 4--5   4--5   4--5   4--set 4--set 4--set 4--set</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] 5--set 5--set</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Transform the edge value to probability interpretaion</span></span></span>
<span class="r-in"><span><span class="va">P</span> <span class="op">&lt;-</span> <span class="va">W</span> <span class="op">*</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Contract vertex 2 and 3 using the "union" criterion as it is proper for</span></span></span>
<span class="r-in"><span><span class="co"># probability matrix input</span></span></span>
<span class="r-in"><span><span class="fu">contract_vertices</span><span class="op">(</span><span class="va">P</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"union"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH c5ac902 UN-- 4 0 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: name (v/c)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from c5ac902 (vertex names):</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Roger Leenders, Claudia Zucca.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

