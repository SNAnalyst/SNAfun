<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Contract multiple vertices into 1 new vertex — contract_vertices • snafun</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Contract multiple vertices into 1 new vertex — contract_vertices"><meta name="description" content="contract_vertices combines a set of vertices into one pseudo-vertex
and returns the reduced network."><meta property="og:description" content="contract_vertices combines a set of vertices into one pseudo-vertex
and returns the reduced network."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">snafun</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2024.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting started</h6></li>
    <li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/Creating-a-graph-object.html">Creating a graph object</a></li>
    <li><a class="dropdown-item" href="../articles/Manipulating-the-graph-object.html">Manipulating the graph object</a></li>
    <li><a class="dropdown-item" href="../articles/Converting-between-graph-classes.html">Converting between graph classes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Network measures</h6></li>
    <li><a class="dropdown-item" href="../articles/Graph-level-indices.html">Graph level indices</a></li>
    <li><a class="dropdown-item" href="../articles/Dyad-level-indices.html">Dyad-level indices</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Statistical Models</h6></li>
    <li><a class="dropdown-item" href="../articles/Statistical-models.html">Statistical Models</a></li>
    <li><a class="dropdown-item" href="../articles/ERGMs.html">Exponential Random Graph Models</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Temporal network analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/ERGM-for-temporal-networks.html">ERGM for temporal networks</a></li>
    <li><a class="dropdown-item" href="../articles/Temporal-networks-exploration.html">Temporal networks exploration and description</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plotting the graph</h6></li>
    <li><a class="dropdown-item" href="../articles/Plotting.html">Plotting</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SNAnalyst/SNAfun/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Contract multiple vertices into 1 new vertex</h1>
      <small class="dont-index">Source: <a href="https://github.com/SNAnalyst/SNAfun/blob/HEAD/R/contract_vertices.R" class="external-link"><code>R/contract_vertices.R</code></a></small>
      <div class="d-none name"><code>contract_vertices.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>contract_vertices</code> combines a set of vertices into one pseudo-vertex
and returns the reduced network.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">contract_vertices</span><span class="op">(</span></span>
<span>  <span class="va">g</span>,</span>
<span>  <span class="va">vertices</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"min"</span>, <span class="st">"max"</span>, <span class="st">"union"</span>, <span class="st">"add"</span><span class="op">)</span>,</span>
<span>  attr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_name <span class="op">=</span> <span class="st">"set"</span>,</span>
<span>  out_as_igraph <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-g">g<a class="anchor" aria-label="anchor" href="#arg-g"></a></dt>
<dd><p>network as an <code>igraph</code> object or an adjacency matrix.</p></dd>


<dt id="arg-vertices">vertices<a class="anchor" aria-label="anchor" href="#arg-vertices"></a></dt>
<dd><p>Numeric vertor indicating the indeces of the vertices are
to be contracted.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Indication of which grouping criterion should be used.<br><code>method="min"</code> indicates the "minimum" criterion (edge values as distances).<br><code>method="max"</code> indicates the "maximum" criterion (edge values as non-cumulative strengths).<br><code>method="add"</code> indicates the "addition" criterion (edge values as cumulative strengths).<br><code>method="union"</code> indicates the "union" criterion (edge values as probability).<br>
The default is "min". See details for examples.</p></dd>


<dt id="arg-attr">attr<a class="anchor" aria-label="anchor" href="#arg-attr"></a></dt>
<dd><p>Either NULL or a character string giving an edge attribute name to
be used as weights.
If <code>NULL</code>, the unweighted network is used to calculate the values of the
resulting contracted network.
If not <code>NULL</code> then the values of the given edge attribute are included
in the adjacency matrix. If the graph has multiple edges, the edge attribute
of an arbitrarily chosen edge (for the multiple edges) is included.</p></dd>


<dt id="arg-new-name">new_name<a class="anchor" aria-label="anchor" href="#arg-new-name"></a></dt>
<dd><p>character, name of the new pseudovertex. If not specified,
it will be called "set".</p></dd>


<dt id="arg-out-as-igraph">out_as_igraph<a class="anchor" aria-label="anchor" href="#arg-out-as-igraph"></a></dt>
<dd><p>logical. If <code>TRUE</code> the resulting network is
returned as an <code>igraph</code> object. If <code>FALSE</code>, the output is
returned as an adjacency matrix.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>igraph</code> object or an adjacency matrix of the contracted network.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function contracts a set of vertices into a pseudo-vertex and returns
the network with that new vertex included (and the contracted vertices
excluded).</p>
<p>Weighted ties can be used.
This requires to either provide a weighted adjacency matrix OR
an <code>igraph</code> object with an attribute that is used for weights.
Make sure that this attribute is numeric.
By default, if the <code>igraph</code> object contains an edge attribute called
<code>weight</code>, this attribute will be used as a weight by default, unless
a different edge attribute is explicitly specified as <code>attr</code>.</p>
<p>The <code>method</code> specifies how the (possibly weighted) edges between the
selected <code>vertices</code> and the other vertices are combined into edges between
the new pseudovertex and the other vertices. The default is to use the
<code>min</code> procedure.</p>
<p>NOTE: if <code>g</code> is an <code>igraph</code> object without vertex names, the
names will be added automatically (as integeres, numbered from 1).
This is useful, so it is clear who-is-who after the vertex contraction.</p>
<p>Minimum Criterion: the edge value between a group and an outside vertex
is measured as the minimal value among all the (nonzero) edge values between
any vertex in the group and the outside vertex. Suggested if edge values are
interpreted as distances.<br><em>Example: suppose vertex A to C has distance 2 and B to C has distance 1,
then according to the minimum criterion, the distance between C and
the merged set AB is 1. Note that if B and C are not connected,
the algorithm takes the distance between A and C to describe
the distance between AB and C.</em></p>
<p>Maximum Criterion: the edge value between a group and an outside vertex
is measured as the maximal value among all the (nonzero) edge values between
any vertex in the group and the outside vertex. Suggested if edge values are
interpreted as non-cumulative strengths. <br><em>Example: we keep using the above example, but the figure now indicates
the strength of tie. According to the maximum criterion, the strength of tie
between AB and C is 2.</em></p>
<p>Addition Criterion: the edge value between a group and an outside vertex
is measured as the sum of all the edge values between any vertex in the group
and the outside vertex. Suggested if edge values are as cummulative strengths. <br><em>Example: according to the addition criterion, the strength of tie between
AB and C is 3</em></p>
<p>Union Criterion: the edge value between a group and an outside vertex is measured
as the probability that there is at least one path connecting the group with
the outside vertex. Suggested if edge values are as probability. <br><em>Example: suppose A has probability 0.2 to reach C and B has probability
0.5 to reach C, then C can be reached from merged AB with probability
1 - (1 - 0.2) * (1 - 0.5) = 0.6 according to the union criterion.</em></p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Based on the <code>contract</code> function from the <code>keyplayer</code> package.
The implementation in our package is more general.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a 5x5 weighted and directed adjacency matrix, where edge values</span></span></span>
<span class="r-in"><span><span class="co"># represent the strength of tie</span></span></span>
<span class="r-in"><span><span class="va">W</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>    <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>    <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>    <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">3</span>,</span></span>
<span class="r-in"><span>    <span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    nrow <span class="op">=</span> <span class="fl">5</span>, ncol <span class="op">=</span> <span class="fl">5</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If the strength is believed to be non-accumulative for a group of vertices,</span></span></span>
<span class="r-in"><span><span class="co"># it is proper to use the "maximum" criterion to contract vertex 2 and 3</span></span></span>
<span class="r-in"><span><span class="fu">contract_vertices</span><span class="op">(</span><span class="va">W</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"max"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH abfe72d UN-- 4 12 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: name (v/c)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from abfe72d (vertex names):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1--set 1--set 1--set 4--5   4--5   4--5   4--set 4--set 4--set 4--set</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] 5--set 5--set</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Transform the edge value to probability interpretaion</span></span></span>
<span class="r-in"><span><span class="va">P</span> <span class="op">&lt;-</span> <span class="va">W</span> <span class="op">*</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Contract vertex 2 and 3 using the "union" criterion as it is proper for</span></span></span>
<span class="r-in"><span><span class="co"># probability matrix input</span></span></span>
<span class="r-in"><span><span class="fu">contract_vertices</span><span class="op">(</span><span class="va">P</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"union"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH ac001cc UN-- 4 0 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: name (v/c)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from ac001cc (vertex names):</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.tilburguniversity.edu/staff/r-t-a-j-leenders" class="external-link">Roger Leenders</a>, <a href="https://www.tilburguniversity.edu/staff/c-zucca" class="external-link">Claudia Zucca</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

