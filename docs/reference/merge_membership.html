<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Merge community membership — merge_membership • snafun</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Merge community membership — merge_membership"><meta name="description" content="Merge communities together for nicer plotting."><meta property="og:description" content="Merge communities together for nicer plotting."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">snafun</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2024.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting started</h6></li>
    <li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/Creating-a-graph-object.html">Creating a graph object</a></li>
    <li><a class="dropdown-item" href="../articles/Manipulating-the-graph-object.html">Manipulating the graph object</a></li>
    <li><a class="dropdown-item" href="../articles/Converting-between-graph-classes.html">Converting between graph classes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Network measures</h6></li>
    <li><a class="dropdown-item" href="../articles/Graph-level-indices.html">Graph level indices</a></li>
    <li><a class="dropdown-item" href="../articles/Dyad-level-indices.html">Dyad-level indices</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Statistical Models</h6></li>
    <li><a class="dropdown-item" href="../articles/Statistical-models.html">Statistical Models</a></li>
    <li><a class="dropdown-item" href="../articles/ERGMs.html">Exponential Random Graph Models</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Temporal network analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/ERGM-for-temporal-networks.html">ERGM for temporal networks</a></li>
    <li><a class="dropdown-item" href="../articles/Temporal-networks-exploration.html">Temporal networks exploration and description</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plotting the graph</h6></li>
    <li><a class="dropdown-item" href="../articles/Plotting.html">Plotting</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SNAnalyst/SNAfun/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Merge community membership</h1>
      <small class="dont-index">Source: <a href="https://github.com/SNAnalyst/SNAfun/blob/HEAD/R/merge_community_membership.R" class="external-link"><code>R/merge_community_membership.R</code></a></small>
      <div class="d-none name"><code>merge_membership.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Merge communities together for nicer plotting.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">merge_membership</span><span class="op">(</span><span class="va">coms</span>, <span class="va">merges</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-coms">coms<a class="anchor" aria-label="anchor" href="#arg-coms"></a></dt>
<dd><p>object of class <code>communities</code> from one of the appropriate
<code>igraph</code> cluster / communities functions.</p></dd>


<dt id="arg-merges">merges<a class="anchor" aria-label="anchor" href="#arg-merges"></a></dt>
<dd><p>list of the merged that should be performed (see 'details' section)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>new object of class <code>communities</code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Community detection algorithms, such as
<code><a href="https://r.igraph.org/reference/cluster_edge_betweenness.html" class="external-link">cluster_edge_betweenness</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_fast_greedy.html" class="external-link">cluster_fast_greedy</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_louvain.html" class="external-link">cluster_louvain</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_leiden.html" class="external-link">cluster_leiden</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_walktrap.html" class="external-link">cluster_walktrap</a></code>,
et cetera,
sometimes yield a bunch of small communities, in addition to larger,
meaningful communities.
This is always the case when there are isolates, as they might each get
a community of their own.</p>
<p>Then, it can be useful to merge (some of) the small communities together for
more informative plotting.</p>
<p>The input of this function is the output of one of the algorithms above:
an object of class <code>communities</code>.
The output is also of class <code>communities</code> and can thus be fed into
igraph's plot function.</p>
<p>The <code>merges</code> argument specifies which communities should be merged.
It is a list, where each element contains the numbers of the communities
(as specified in the <code>coms</code> object) that need to be merged into a new
community.
The list can contain multiple elements, each will become their own new community.
See the examples for, well, examples of this.</p>
<p>For clarity, the new communities will be numbered from n + 1, where
'n' is the number of communities in <code>coms</code>.</p>
<p>NOTE: this is only useful for plotting!!
The only thing the function does is change the membership of the vertices
into the new membership structure.
However, it leaves the modularity values intact and also does not change the
'merges' element from the <code>coms</code> object.
Hence, running <code><a href="https://r.igraph.org/reference/modularity.igraph.html" class="external-link">modularity</a></code> on the output of this function
will return the modularity of the <strong>original</strong> community memberships, not the
new merged ones.
However, it is easy to calculate the modularity of the new
communities: see example section below.
Applying <code><a href="https://r.igraph.org/reference/communities.html" class="external-link">sizes</a></code> works fine on the output of
this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">judge_net</span>, package <span class="op">=</span> <span class="st">"SNA4DSData"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># original plot, with 5 communities</span></span></span>
<span class="r-in"><span><span class="va">coms</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/cluster_fast_greedy.html" class="external-link">cluster_fast_greedy</a></span><span class="op">(</span><span class="va">judge_net</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">coms</span>, <span class="va">judge_net</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/communities.html" class="external-link">sizes</a></span><span class="op">(</span><span class="va">coms</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># for illustration of the function, let's join node 40 with community 2</span></span></span>
<span class="r-in"><span><span class="co"># it is best to merge into a new object, so the original result is not lost</span></span></span>
<span class="r-in"><span><span class="va">com2</span> <span class="op">&lt;-</span> <span class="fu">merge_membership</span><span class="op">(</span><span class="va">coms</span>, merges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">com2</span>, <span class="va">judge_net</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/communities.html" class="external-link">sizes</a></span><span class="op">(</span><span class="va">com2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute modularity for the new grouping</span></span></span>
<span class="r-in"><span><span class="co"># (Note: it is OK that the communities are not numbered consecutively)</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/modularity.igraph.html" class="external-link">modularity</a></span><span class="op">(</span><span class="va">judge_net</span>, <span class="va">com2</span><span class="op">$</span><span class="va">membership</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># igraph::cluster_fast_greedy uses the edge weight by default.</span></span></span>
<span class="r-in"><span><span class="co"># To include that here as well, use:</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/modularity.igraph.html" class="external-link">modularity</a></span><span class="op">(</span><span class="va">judge_net</span>, <span class="va">com2</span><span class="op">$</span><span class="va">membership</span>, </span></span>
<span class="r-in"><span>       weights <span class="op">=</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/E.html" class="external-link">E</a></span><span class="op">(</span><span class="va">judge_net</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Note: \code{igraph::modularity} is only intended for undirected </span></span></span>
<span class="r-in"><span><span class="co"># graphs with non-negative weights. In case of negative weights, </span></span></span>
<span class="r-in"><span><span class="co"># use \code{wsyn::modularity}. </span></span></span>
<span class="r-in"><span><span class="co"># In case of directed graphs, I currently am not aware of a good </span></span></span>
<span class="r-in"><span><span class="co"># implementation of modularity.</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.tilburguniversity.edu/staff/r-t-a-j-leenders" class="external-link">Roger Leenders</a>, <a href="https://www.tilburguniversity.edu/staff/c-zucca" class="external-link">Claudia Zucca</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

