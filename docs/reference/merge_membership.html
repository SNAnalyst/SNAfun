<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Merge community membership — merge_membership • snafun</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Merge community membership — merge_membership"><meta property="og:description" content="Merge communities together for nicer plotting."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">snafun</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2024.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/SNAnalyst/SNAfun/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merge community membership</h1>
    <small class="dont-index">Source: <a href="https://github.com/SNAnalyst/SNAfun/blob/HEAD/R/merge_community_membership.R" class="external-link"><code>R/merge_community_membership.R</code></a></small>
    <div class="hidden name"><code>merge_membership.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Merge communities together for nicer plotting.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">merge_membership</span><span class="op">(</span><span class="va">coms</span>, <span class="va">merges</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-coms">coms<a class="anchor" aria-label="anchor" href="#arg-coms"></a></dt>
<dd><p>object of class <code>communities</code> from one of the appropriate
<code>igraph</code> cluster / communities functions.</p></dd>


<dt id="arg-merges">merges<a class="anchor" aria-label="anchor" href="#arg-merges"></a></dt>
<dd><p>list of the merged that should be performed (see 'details' section)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>new object of class <code>communities</code></p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Community detection algorithms, such as
<code><a href="https://r.igraph.org/reference/cluster_edge_betweenness.html" class="external-link">cluster_edge_betweenness</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_fast_greedy.html" class="external-link">cluster_fast_greedy</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_louvain.html" class="external-link">cluster_louvain</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_leiden.html" class="external-link">cluster_leiden</a></code>,
<code><a href="https://r.igraph.org/reference/cluster_walktrap.html" class="external-link">cluster_walktrap</a></code>,
et cetera,
sometimes yield a bunch of small communities, in addition to larger,
meaningful communities.
This is always the case when there are isolates, as they might each get
a community of their own.</p>
<p>Then, it can be useful to merge (some of) the small communities together for
more informative plotting.</p>
<p>The input of this function is the output of one of the algorithms above:
an object of class <code>communities</code>.
The output is also of class <code>communities</code> and can thus be fed into
igraph's plot function.</p>
<p>The <code>merges</code> argument specifies which communities should be merged.
It is a list, where each element contains the numbers of the communities
(as specified in the <code>coms</code> object) that need to be merged into a new
community.
The list can contain multiple elements, each will become their own new community.
See the examples for, well, examples of this.</p>
<p>For clarity, the new communities will be numbered from n + 1, where
'n' is the number of communities in <code>coms</code>.</p>
<p>NOTE: this is only useful for plotting!!
The only thing the function does is change the membership of the vertices
into the new membership structure.
However, it leaves the modularity values intact and also does not change the
'merges' element from the <code>coms</code> object.
Hence, running <code><a href="https://r.igraph.org/reference/modularity.igraph.html" class="external-link">modularity</a></code> on the output of this function
will return the modularity of the <strong>original</strong> community memberships, not the
new merged ones.
However, it is easy to calculate the modularity of the new
communities: see example section below.
Applying <code><a href="https://r.igraph.org/reference/communities.html" class="external-link">sizes</a></code> works fine on the output of
this function.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">judge_net</span>, package <span class="op">=</span> <span class="st">"SNA4DSData"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># original plot, with 5 communities</span></span></span>
<span class="r-in"><span><span class="va">coms</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/cluster_fast_greedy.html" class="external-link">cluster_fast_greedy</a></span><span class="op">(</span><span class="va">judge_net</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">coms</span>, <span class="va">judge_net</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/communities.html" class="external-link">sizes</a></span><span class="op">(</span><span class="va">coms</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># for illustration of the function, let's join node 40 with community 2</span></span></span>
<span class="r-in"><span><span class="co"># it is best to merge into a new object, so the original result is not lost</span></span></span>
<span class="r-in"><span><span class="va">com2</span> <span class="op">&lt;-</span> <span class="fu">merge_membership</span><span class="op">(</span><span class="va">coms</span>, merges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">com2</span>, <span class="va">judge_net</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/communities.html" class="external-link">sizes</a></span><span class="op">(</span><span class="va">com2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute modularity for the new grouping</span></span></span>
<span class="r-in"><span><span class="co"># (Note: it is OK that the communities are not numbered consecutively)</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/modularity.igraph.html" class="external-link">modularity</a></span><span class="op">(</span><span class="va">judge_net</span>, <span class="va">com2</span><span class="op">$</span><span class="va">membership</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># igraph::cluster_fast_greedy uses the edge weight by default.</span></span></span>
<span class="r-in"><span><span class="co"># To include that here as well, use:</span></span></span>
<span class="r-in"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/modularity.igraph.html" class="external-link">modularity</a></span><span class="op">(</span><span class="va">judge_net</span>, <span class="va">com2</span><span class="op">$</span><span class="va">membership</span>, </span></span>
<span class="r-in"><span>       weights <span class="op">=</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/E.html" class="external-link">E</a></span><span class="op">(</span><span class="va">judge_net</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Note: \code{igraph::modularity} is only intended for undirected </span></span></span>
<span class="r-in"><span><span class="co"># graphs with non-negative weights. In case of negative weights, </span></span></span>
<span class="r-in"><span><span class="co"># use \code{wsyn::modularity}. </span></span></span>
<span class="r-in"><span><span class="co"># In case of directed graphs, I currently am not aware of a good </span></span></span>
<span class="r-in"><span><span class="co"># implementation of modularity.</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Roger Leenders, Claudia Zucca.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

